<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cat Clicker Rebirth Edition</title>
  <style>
    body { text-align: center; font-family: 'Arial', sans-serif; }
    #cookie { width: 200px; height: 200px; margin-top: 50px; cursor: pointer; }
    #score { font-size: 24px; margin-top: 20px; }
    .upgrade, .button { margin: 10px; padding: 5px 10px; font-size: 16px; cursor: pointer; }
    .achievement { margin: 10px; font-size: 16px; }
    .section { margin-top: 30px; }
  </style>
</head>
<body>

<h1>—Ç–∞–ø–∞—Ç—å –∫–æ—Ç–∞</h1>
<img id="cookie" src="/images/cat-breakdance.gif" alt="Cat" onclick="clickCookie(event)">
<p id="score">–¥–µ–Ω—å–≥–∏: <span id="scoreValue">0</span></p>

<div class="section">
  <h2>–£–ª—É—á—à–µ–Ω–∏—è</h2>
  <p id="clickValue">–æ–¥–∏–Ω –∫–ª–∏–∫ –ø—Ä–∏–Ω–æ—Å–∏—Ç: 1</p>
  <button class="upgrade" onclick="buyUpgrade(10, 2)">–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ 1 (10)</button>
  <button class="upgrade" onclick="buyUpgrade(20, 4)">–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ 2 (20)</button>
</div>

<div class="section">
  <h2>–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä</h2>
  <p id="autoClickerStatus">Auto-Clicker: Off</p>
  <button class="upgrade" onclick="buyAutoClicker(50, 1)">–∫—É–ø–∏—Ç—å –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä (50)</button>
  <button class="upgrade" onclick="buyUpgradeAutoClicker(30, 1)">–æ–±–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä (30)</button>
</div>

<div class="section">
  <h2>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
  <p class="achievement" id="achievement1">Achievement 1: Not yet achieved</p>
  <p class="achievement" id="achievement2">Achievement 2: Not yet achieved</p>
</div>

<div class="section">
  <h2>–ü–∏—Ç–æ–º—Ü—ã</h2>
  <div id="petContainer"></div>
</div>

<div class="section">
  <h2>–ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</h2>
  <p id="rebirthInfo">–ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è: 0 | –°–ª–µ–¥—É—é—â–µ–µ: 5,000,000</p>
  <button class="button" onclick="doRebirth()">–ü–µ—Ä–µ—Ä–æ–¥–∏—Ç—å—Å—è</button>
</div>

<div class="section">
  <h2>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</h2>
  <button class="button" onclick="saveGame()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  <button class="button" onclick="loadGame()">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
  <button class="button" onclick="resetGame()">üóë –°–±—Ä–æ—Å–∏—Ç—å</button>
</div>

<script>
let score = 0;
let clickValue = 1;
let upgradeCount = 0;

let autoClicker = {
  enabled: false,
  speed: 1,
  interval: null,
};

let rebirthCount = 0;
let rebirthCost = 5000000;
let rebirthMultiplier = 1;

const pets = [
  { name: "–†—ã–∂–∏–∫", cost: 100, boost: 2, owned: false },
  { name: "–ß–µ—Ä–Ω—ã—à", cost: 500, boost: 3, owned: false },
  { name: "–î—Ä–∞–∫–æ–Ω", cost: 1000000, boost: 5, owned: false, rebirthRequired: 1 },
  { name: "–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ö–æ—Ç", cost: 5000000, boost: 10, owned: false, rebirthRequired: 2 }
];

function updateUI() {
  document.getElementById("scoreValue").textContent = score.toFixed(0);
  document.getElementById("clickValue").textContent = `–æ–¥–∏–Ω –∫–ª–∏–∫ –ø—Ä–∏–Ω–æ—Å–∏—Ç: ${clickValue}`;
  document.getElementById("autoClickerStatus").textContent = `Auto-Clicker: ${autoClicker.enabled ? "On" : "Off"}`;
  document.getElementById("rebirthInfo").textContent = `–ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è: ${rebirthCount} | –°–ª–µ–¥—É—é—â–µ–µ: ${rebirthCost.toLocaleString()}`;
}

function clickCookie(e) {
  score += clickValue * rebirthMultiplier;
  updateUI();
  checkAchievements();
  spawnParticle(e.clientX, e.clientY);
}

function buyUpgrade(baseCost, value) {
  let dynamicCost = Math.floor(baseCost * Math.pow(1.25, upgradeCount));
  if (score >= dynamicCost) {
    score -= dynamicCost;
    clickValue += value;
    upgradeCount++;
    updateUI();
    checkAchievements();
  } else {
    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!");
  }
}

function buyAutoClicker(cost, speed) {
  if (!autoClicker.enabled && score >= cost) {
    score -= cost;
    autoClicker.enabled = true;
    autoClicker.speed = speed;
    autoClicker.interval = setInterval(() => {
      score += clickValue * rebirthMultiplier;
      updateUI();
    }, 1000);
  } else if (autoClicker.enabled) {
    alert("–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä —É–∂–µ –∫—É–ø–ª–µ–Ω!");
  } else {
    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!");
  }
}

function buyUpgradeAutoClicker(cost, speed) {
  if (score >= cost && autoClicker.enabled) {
    score -= cost;
    autoClicker.speed += speed;
    clearInterval(autoClicker.interval);
    autoClicker.interval = setInterval(() => {
      score += clickValue * rebirthMultiplier * autoClicker.speed;
      updateUI();
    }, 1000);
  } else {
    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥ –∏–ª–∏ –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä –Ω–µ –∫—É–ø–ª–µ–Ω!");
  }
}

function checkAchievements() {
  document.getElementById("achievement1").textContent =
    score >= 100 ? "Achievement 1: Earned 100!" : "Achievement 1: Not yet achieved";
  document.getElementById("achievement2").textContent =
    score >= 1000 ? "Achievement 2: Earned 1,000!" : "Achievement 2: Not yet achieved";
}

function spawnParticle(x, y) {
  const particle = document.createElement("div");
  particle.style.position = "absolute";
  particle.style.left = x + "px";
  particle.style.top = y + "px";
  particle.style.fontSize = "20px";
  particle.textContent = "+$" + (clickValue * rebirthMultiplier).toFixed(0);
  document.body.appendChild(particle);
  setTimeout(() => particle.remove(), 800);
}
function showPets() {
  const petContainer = document.getElementById("petContainer");
  petContainer.innerHTML = "";

  pets.forEach((pet, i) => {
    if (pet.rebirthRequired && rebirthCount < pet.rebirthRequired) return;

    const btn = document.createElement("button");
    btn.className = "button";
    btn.textContent = pet.owned
      ? `${pet.name} ‚Äî –ê–∫—Ç–∏–≤–µ–Ω`
      : `${pet.name} (${pet.cost})`;
    btn.disabled = pet.owned;
    btn.onclick = () => {
      if (score >= pet.cost) {
        score -= pet.cost;
        pet.owned = true;
        clickValue += pet.boost;
        updateUI();
        showPets();
      } else alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!");
    };
    petContainer.appendChild(btn);
  });
}

setInterval(() => {
  if (Math.random() < 0.15 + 0.02 * rebirthCount) {
    const bonus = document.createElement("button");
    bonus.textContent = "–ë–æ–Ω—É—Å!";
    bonus.style.position = "absolute";
    bonus.style.left = Math.random() * window.innerWidth + "px";
    bonus.style.top = Math.random() * window.innerHeight + "px";
    bonus.onclick = () => {
      score += 100 * rebirthMultiplier;
      bonus.remove();
      updateUI();
    };
    document.body.appendChild(bonus);
    setTimeout(() => bonus.remove(), 5000);
  }
}, 20000);

function doRebirth() {
  if (score >= rebirthCost) {
    if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ—Ä–æ–¥–∏—Ç—å—Å—è? –í—Å–µ —Å–±—Ä–æ—Å–∏—Ç—Å—è –∫—Ä–æ–º–µ –ø–∏—Ç–æ–º—Ü–µ–≤ –∏ –±–æ–Ω—É—Å–æ–≤.")) {
      score = 0;
      clickValue = 1;
      upgradeCount = 0;
      if (autoClicker.interval) clearInterval(autoClicker.interval);
      autoClicker = { enabled: false, speed: 1, interval: null };

      rebirthCount++;
      rebirthMultiplier = 1 + rebirthCount * 0.5;
      rebirthCost *= 2;

      updateUI();
      showPets();
      checkAchievements();
      saveGame();
      alert("–ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ! –ë–æ–Ω—É—Å –∫ –∫–ª–∏–∫–∞–º: " + rebirthMultiplier.toFixed(1) + "x");
    }
  } else {
    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥ –¥–ª—è –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è!");
  }
}

function saveGame() {
  const save = {
    score,
    clickValue,
    upgradeCount,
    autoClicker,
    pets,
    rebirthCount,
    rebirthCost,
    rebirthMultiplier
  };
  localStorage.setItem("catClickerSave", JSON.stringify(save));
}

function loadGame() {
  const save = JSON.parse(localStorage.getItem("catClickerSave"));
  if (save) {
    score = save.score || 0;
    clickValue = save.clickValue || 1;
    upgradeCount = save.upgradeCount || 0;
    autoClicker = save.autoClicker || { enabled: false, speed: 1, interval: null };
    pets.forEach((p, i) => Object.assign(p, save.pets?.[i] || {}));
    rebirthCount = save.rebirthCount || 0;
    rebirthCost = save.rebirthCost || 5000000;
    rebirthMultiplier = save.rebirthMultiplier || 1;

    if (autoClicker.enabled) {
      autoClicker.interval = setInterval(() => {
        score += clickValue * rebirthMultiplier * autoClicker.speed;
        updateUI();
      }, 1000);
    }

    updateUI();
    showPets();
    checkAchievements();
  }
}

function resetGame() {
  if (confirm("–°–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å?")) {
    localStorage.removeItem("catClickerSave");
    location.reload();
  }
}

window.onload = () => {
  loadGame();
  showPets();
  updateUI();
};

setInterval(saveGame, 15000); // Auto-save every 15 seconds
</script>
</body>
</html>
