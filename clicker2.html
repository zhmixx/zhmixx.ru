<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat Clicker</title>
    <style>
        * { box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', sans-serif;
            background: #f4f4f4;
            text-align: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        h1 { font-size: 3em; margin: 0.2em 0; }
        h2 { margin-top: 2em; }

        #cookie {
            width: 220px;
            cursor: pointer;
            transition: transform 0.1s ease;
        }

        #cookie:active { transform: scale(0.95); }

        #score, #clickValue, #autoClickerStatus {
            font-size: 1.2em;
            margin: 10px 0;
        }

        .section { margin-top: 30px; }

        .button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 6px;
            font-size: 1em;
            cursor: pointer;
        }

        .button:hover { background-color: #2980b9; }

        .achievement {
            font-size: 1em;
            margin: 5px;
            color: gray;
        }

        .unlocked {
            color: green;
            font-weight: bold;
        }

        .particle {
            position: absolute;
            font-weight: bold;
            color: gold;
            pointer-events: none;
            user-select: none;
            transition: all 0.8s ease-out;
        }
    </style>
</head>
<body>

    <h1>–¢–∞–ø–∞–π –∫–æ—Ç–∞!</h1>
    <img id="cookie" src="/images/cat-breakdance.gif" alt="Click!" onclick="clickCookie(event)">
    <p id="score">–î–µ–Ω—å–≥–∏: <span id="scoreValue">0</span></p>
    <p id="clickValue">–û–¥–∏–Ω –∫–ª–∏–∫: 1</p>

    <div class="section">
        <h2>–£–ª—É—á—à–µ–Ω–∏—è</h2>
        <button class="button" onclick="buyUpgrade(10, 1)">+1 –∫–ª–∏–∫ (10)</button>
        <button class="button" onclick="buyUpgrade(25, 3)">+3 –∫–ª–∏–∫–∞ (25)</button>
    </div>

    <div class="section">
        <h2>–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä</h2>
        <p id="autoClickerStatus">–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä: –í—ã–∫–ª.</p>
        <button class="button" onclick="buyAutoClicker(50)">–ö—É–ø–∏—Ç—å –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä (50)</button>
        <button class="button" onclick="upgradeAutoClicker(30)">–£–ª—É—á—à–∏—Ç—å –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä (30)</button>
    </div>

    <div class="section">
        <h2>–ü–∏—Ç–æ–º—Ü—ã</h2>
        <div id="petContainer"></div>
    </div>

    <div class="section">
        <h2>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
        <p class="achievement" id="achvClicks">100 –∫–ª–∏–∫–æ–≤</p>
        <p class="achievement" id="achvUpgrades">5 —É–ª—É—á—à–µ–Ω–∏–π</p>
        <p class="achievement" id="achvAuto">–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä –≤–∫–ª—é—á–µ–Ω</p>
    </div>

    <div class="section">
        <h2>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</h2>
        <button class="button" onclick="saveGame()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button class="button" onclick="loadGame()">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
        <button class="button" onclick="resetGame()">üóë –°–±—Ä–æ—Å</button>
    </div>

    <script>
        let score = 0;
        let clickValue = 1;
        let upgradeCount = 0;
        let bonusActive = false;

        let autoClicker = {
            enabled: false,
            speed: 1,
            interval: null
        };

        const pets = [
            { name: "kolbasa", cost: 100, boost: 0.1, owned: false },
            { name: "shaurma", cost: 250, boost: 0.25, owned: false }
        ];

        function updateUI() {
            document.getElementById("scoreValue").textContent = Math.floor(score);
            document.getElementById("clickValue").textContent = "–û–¥–∏–Ω –∫–ª–∏–∫: " + clickValue.toFixed(2);
            document.getElementById("autoClickerStatus").textContent = "–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä: " + (autoClicker.enabled ? "–í–∫–ª." : "–í—ã–∫–ª.");
        }

        function clickCookie(e) {
            score += clickValue;
            updateUI();
            checkAchievements();
            spawnParticle(e.clientX, e.clientY);
        }

        function spawnParticle(x, y) {
            const particle = document.createElement("div");
            particle.className = "particle";
            particle.style.left = x + "px";
            particle.style.top = y + "px";
            particle.textContent = "+" + clickValue.toFixed(1);
            document.body.appendChild(particle);
            requestAnimationFrame(() => {
                particle.style.top = (y - 50) + "px";
                particle.style.opacity = 0;
            });
            setTimeout(() => particle.remove(), 800);
        }

        function buyUpgrade(cost, value) {
            if (score >= cost) {
                score -= cost;
                clickValue += value;
                upgradeCount++;
                updateUI();
                checkAchievements();
            } else alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!");
        }

        function buyAutoClicker(cost) {
            if (!autoClicker.enabled && score >= cost) {
                score -= cost;
                autoClicker.enabled = true;
                startAutoClicker();
                updateUI();
                checkAchievements();
            } else alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥ –∏–ª–∏ —É–∂–µ –∫—É–ø–ª–µ–Ω!");
        }

        function upgradeAutoClicker(cost) {
            if (autoClicker.enabled && score >= cost) {
                score -= cost;
                autoClicker.speed++;
                startAutoClicker();
                updateUI();
            } else alert("–ö—É–ø–∏—Ç–µ –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä —Å–Ω–∞—á–∞–ª–∞ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥.");
        }

        function startAutoClicker() {
            clearInterval(autoClicker.interval);
            autoClicker.interval = setInterval(() => {
                score += clickValue;
                updateUI();
                checkAchievements();
            }, 1000 / autoClicker.speed);
        }

        function checkAchievements() {
            if (score >= 100) document.getElementById("achvClicks").classList.add("unlocked");
            if (upgradeCount >= 5) document.getElementById("achvUpgrades").classList.add("unlocked");
            if (autoClicker.enabled) document.getElementById("achvAuto").classList.add("unlocked");
        }

        function showPets() {
            const petContainer = document.getElementById("petContainer");
            petContainer.innerHTML = "";
            pets.forEach((pet, i) => {
                const btn = document.createElement("button");
                btn.className = "button";
                btn.textContent = pet.owned ? `${pet.name} ‚Äî –ê–∫—Ç–∏–≤–µ–Ω` : `${pet.name} (${pet.cost})`;
                btn.disabled = pet.owned;
                btn.onclick = () => {
                    if (score >= pet.cost) {
                        score -= pet.cost;
                        pet.owned = true;
                        clickValue += pet.boost;
                        updateUI();
                        showPets();
                    } else alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!");
                };
                petContainer.appendChild(btn);
            });
        }

        function saveGame() {
            const data = {
                score, clickValue, upgradeCount, autoClicker, pets
            };
            localStorage.setItem("catClickerSave", JSON.stringify(data));
        }

        function loadGame() {
            const saved = JSON.parse(localStorage.getItem("catClickerSave"));
            if (saved) {
                score = saved.score;
                clickValue = saved.clickValue;
                upgradeCount = saved.upgradeCount;
                autoClicker = saved.autoClicker;
                pets.forEach((p, i) => {
                    pets[i].owned = saved.pets[i]?.owned;
                });
                if (autoClicker.enabled) startAutoClicker();
                updateUI();
                showPets();
                checkAchievements();
            }
        }

        function resetGame() {
            if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –∏–≥—Ä—É?")) {
                localStorage.removeItem("catClickerSave");
                location.reload();
            }
        }

        function activateBonus() {
            if (bonusActive) return;
            bonusActive = true;
            clickValue *= 2;
            document.body.style.background = "#fff5d7";
            setTimeout(() => {
                clickValue /= 2;
                bonusActive = false;
                document.body.style.background = "";
                updateUI();
            }, 10000);
        }

        setInterval(() => {
            if (Math.random() < 0.15) {
                const bonusBtn = document.createElement("button");
                bonusBtn.textContent = "BONUS!";
                bonusBtn.className = "button";
                bonusBtn.style.position = "fixed";
                bonusBtn.style.top = Math.random() * 80 + "%";
                bonusBtn.style.left = Math.random() * 80 + "%";
                bonusBtn.onclick = () => {
                    activateBonus();
                    bonusBtn.remove();
                };
                document.body.appendChild(bonusBtn);
                setTimeout(() => bonusBtn.remove(), 7000);
            }
        }, 20000);

        setInterval(saveGame, 15000); // Autosave every 15s

        window.onload = () => {
            loadGame();
            showPets();
        };
    </script>
</body>
</html>
